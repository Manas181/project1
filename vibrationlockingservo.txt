import RPi.GPIO as GPIO
import time

# GPIO pin numbers for the vibration sensor and servo motor
vibration_pin = 18
servo_pin = 17

# Initialize GPIO settings
GPIO.setmode(GPIO.BCM)
GPIO.setup(vibration_pin, GPIO.IN)
GPIO.setup(servo_pin, GPIO.OUT)

# Create a PWM object for the servo motor
servo_pwm = GPIO.PWM(servo_pin, 50) # 50Hz frequency

# Define a function to lock the door
def lock_door():
    servo_pwm.start(7.5) # Start PWM with duty cycle for locked position (90 degrees)
    time.sleep(1) # Wait for servo to reach desired position
    servo_pwm.stop() # Stop PWM

# Define a function to unlock the door
def unlock_door():
    servo_pwm.start(2.5) # Start PWM with duty cycle for unlocked position (0 degrees)
    time.sleep(1) # Wait for servo to reach desired position
    servo_pwm.stop() # Stop PWM

# Main loop
while True:
    if GPIO.input(vibration_pin):
        # If vibration is detected, lock the door
        lock_door()
    else:
        # If no vibration is detected, unlock the door
        unlock_door()

# Clean up GPIO settings
GPIO.cleanup()
