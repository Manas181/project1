import RPi.GPIO as GPIO
import time

# GPIO pin numbers for the vibration sensor and servo motor
vibration_pin = 18
servo_pin = 17

# Initialize GPIO settings
GPIO.setmode(GPIO.BCM)
GPIO.setup(vibration_pin, GPIO.IN)
GPIO.setup(servo_pin, GPIO.OUT)

# Create a PWM object for the servo motor
servo_pwm = GPIO.PWM(servo_pin, 50) # 50Hz frequency

# Define a function to rotate the servo motor to a specific angle
def rotate_servo(angle):
    duty_cycle = 2.5 + (angle/180)*10 # Convert angle to duty cycle
    servo_pwm.start(duty_cycle) # Start PWM with duty cycle for desired angle
    time.sleep(1) # Wait for servo to reach desired position
    servo_pwm.stop() # Stop PWM

# Main loop
while True:
    if GPIO.input(vibration_pin):
        # If vibration is detected, rotate the servo motor to 90 degrees
        rotate_servo(90)
    else:
        # If vibration is not detected, keep the servo motor at idle position (0 degrees)
        rotate_servo(0)

# Clean up GPIO settings
GPIO.cleanup()
