import RPi.GPIO as GPIO
import time

# Set up GPIO pins
GPIO.setmode(GPIO.BOARD)

# Define pins
relay_pin = 7
sensor_pin = 11

# Set up relay pin as output
GPIO.setup(relay_pin, GPIO.OUT)

# Set up sensor pin as input
GPIO.setup(sensor_pin, GPIO.IN)

# Set initial lock state to unlocked
lock_state = False

while True:
    # Wait for vibration sensor input
    GPIO.wait_for_edge(sensor_pin, GPIO.RISING)

    # Toggle lock state
    lock_state = not lock_state

    # Lock or unlock solenoid
    if lock_state:
        # Lock solenoid
        GPIO.output(relay_pin, GPIO.HIGH)
        print("Solenoid locked")
    else:
        # Unlock solenoid
        GPIO.output(relay_pin, GPIO.LOW)
        print("Solenoid unlocked")

    # Wait for 1 second to avoid multiple triggers
    time.sleep(1)

# Clean up GPIO pins
GPIO.cleanup()
